<html>
    <script src="test.js"></script>
    <script>

        function myjscode(a)
        {
            return a + 20;
        }

        function jsmcpi(n)
        {
            var count = 0;

            for(var i = 0; i < n; ++i)
            {
                var x = Math.random();
                var y = Math.random();

                if(x * x + y * y <= 1.0)
                {
                    ++count;
                }
            }

            return 4.0 * count / n;
        }
        
        function main()
        {
            Module['onRuntimeInitialized'] = doWork;
        }

        function doWork()
        {
            //var res = Module.ccall('myfunc', 'number', ['number'], [34]);

            //var res = Module._myfunc(36);

            var N = 100000000;

            var t1 = Date.now();            
            var res = Module._mcpi(N, 123);
            var t2 = Date.now();

            console.log(res + ', ' + (t2 - t1) + ' ms');

            t1 = Date.now();
            res = jsmcpi(N);
            t2 = Date.now();

            console.log(res + ', ' + (t2 - t1) + ' ms');            
        }
    </script>
<body onload="main()">
</body>
</html>